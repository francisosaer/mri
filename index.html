<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MRI vragenlijst</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f7f7f7;
  padding: 20px;
}

form {
  max-width: 600px;
  margin: auto;
  background: #ffffff;
  padding: 25px;
  border-radius: 10px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

label {
  display: block;
  margin-top: 15px;
}

.question {
  font-weight: bold;
  font-size: 18px;
  margin-top: 25px;
  margin-bottom: 8px;
}

.options {
  display: flex;
  gap: 30px;
  margin-bottom: 10px;
}

.options label {
  font-weight: normal;
}

input[type="text"], select {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  margin-top: 5px;
}

button {
  margin-top: 25px;
  width: 100%;
  padding: 12px;
  font-size: 18px;
  cursor: pointer;
  border: none;
  border-radius: 5px;
}

button:disabled {
  cursor: not-allowed;
}

.consent {
  margin-top: 25px;
  font-size: 14px;
}
</style>
</head>

<body>

<form action="https://formspree.io/f/mdaaznay" method="POST" id="mriForm">
  <h1>MRI vragenlijst</h1>

  <!-- Taalkeuze -->
  <label for="taal">Kies uw taal / Choisissez la langue / Choose your language</label>
  <select id="taal" name="taal">
    <option value="nl">Nederlands</option>
    <option value="fr">Français</option>
    <option value="en">English</option>
  </select>

  <!-- Persoonsgegevens -->
  <label for="voornaam">Voornaam</label>
  <input type="text" name="voornaam" required>

  <label for="naam">Naam</label>
  <input type="text" name="naam" required>

  <!-- Vragen -->
  <div class="question" data-key="Pacemaker">Heeft u een pacemaker of ingeplante hartdefibrillator?</div>
  <div class="options">
    <label><input type="radio" name="Pacemaker" value="Ja" required> Ja</label>
    <label><input type="radio" name="Pacemaker" value="Nee"> Nee</label>
  </div>

  <div class="question" data-key="Pijnpomp">Heeft u een neurostimulator/pijnpomp/insulinepomp?</div>
  <div class="options">
    <label><input type="radio" name="Pijnpomp" value="Ja" required> Ja</label>
    <label><input type="radio" name="Pijnpomp" value="Nee"> Nee</label>
  </div>

  <div class="question" data-key="Binnenoor">Heeft u een binnenoorimplantaat/cochleair implantaat?</div>
  <div class="options">
    <label><input type="radio" name="Binnenoor" value="Ja" required> Ja</label>
    <label><input type="radio" name="Binnenoor" value="Nee"> Nee</label>
  </div>

  <div class="question" data-key="Metaal">Heeft u een metalen fragment (bv. metaalsplinter) in uw oog?</div>
  <div class="options">
    <label><input type="radio" name="Metaal" value="Ja" required> Ja</label>
    <label><input type="radio" name="Metaal" value="Nee"> Nee</label>
  </div>

  <div class="question" data-key="Hoorapparaat">Heeft u een hoorapparaat?</div>
  <div class="options">
    <label><input type="radio" name="Hoorapparaat" value="Ja" required> Ja</label>
    <label><input type="radio" name="Hoorapparaat" value="Nee"> Nee</label>
  </div>

  <div class="question" data-key="Rugoperatie">Heeft u ooit een rugoperatie ondergaan?</div>
  <div class="options">
    <label><input type="radio" name="Rugoperatie" value="Ja" required> Ja</label>
    <label><input type="radio" name="Rugoperatie" value="Nee"> Nee</label>
  </div>

  <!-- Toestemming / verklaring -->
  <div class="consent">
    <label>
      <input type="checkbox" name="toestemming" required>
      Ik verklaar dat ik deze vragenlijst zelf en naar waarheid heb ingevuld
      en ga akkoord met het gebruik van deze gegevens voor medische doeleinden.
    </label>
  </div>

  <!-- Mail-onderwerp -->
  <input type="hidden" name="_subject" id="emailSubject">

  <button type="submit" id="submitBtn" disabled>Verzenden</button>
</form>

<script>
const translations = {
  nl: {
    Voornaam: "Voornaam",
    Naam: "Naam",
    Pacemaker: "Heeft u een pacemaker of ingeplante hartdefibrillator?",
    Pijnpomp: "Heeft u een neurostimulator/pijnpomp/insulinepomp?",
    Binnenoor: "Heeft u een binnenoorimplantaat/cochleair implantaat?",
    Metaal: "Heeft u een metalen fragment (bv. metaalsplinter) in uw oog?",
    Hoorapparaat: "Heeft u een hoorapparaat?",
    Rugoperatie: "Heeft u ooit een rugoperatie ondergaan?",
    Ja: "Ja",
    Nee: "Nee"
  },
  fr: {
    Voornaam: "Prénom",
    Naam: "Nom",
    Pacemaker: "Avez-vous un pacemaker ou un défibrillateur cardiaque implanté?",
    Pijnpomp: "Avez-vous un neurostimulateur / pompe à douleur / pompe à insuline?",
    Binnenoor: "Avez-vous un implant de l'oreille interne / implant cochléaire?",
    Metaal: "Avez-vous un fragment métallique (ex: éclat de métal) dans votre œil?",
    Hoorapparaat: "Avez-vous un appareil auditif?",
    Rugoperatie: "Avez-vous déjà subi une chirurgie du dos?",
    Ja: "Oui",
    Nee: "Non"
  },
  en: {
    Voornaam: "First Name",
    Naam: "Last Name",
    Pacemaker: "Do you have a pacemaker or implanted defibrillator?",
    Pijnpomp: "Do you have a neurostimulator / pain pump / insulin pump?",
    Binnenoor: "Do you have an inner ear implant / cochlear implant?",
    Metaal: "Do you have a metal fragment (e.g., splinter) in your eye?",
    Hoorapparaat: "Do you have a hearing aid?",
    Rugoperatie: "Have you ever had back surgery?",
    Ja: "Yes",
    Nee: "No"
  }
};

// Taalkeuze
document.getElementById("taal").addEventListener("change", function() {
  const lang = this.value;

  // Update vragen
  document.querySelectorAll('.question').forEach(q => {
    const key = q.dataset.key;
    q.textContent = translations[lang][key];
  });

  // Update Ja/Nee
  document.querySelectorAll('.options label input').forEach(input => {
    const label = input.parentElement;
    if(input.value === "Ja") label.childNodes[1].textContent = translations[lang].Ja;
    if(input.value === "Nee") label.childNodes[1].textContent = translations[lang].Nee;
  });

  // Update labels voornaam / naam
  document.querySelector('label[for="voornaam"]').textContent = translations[lang].Voornaam;
  document.querySelector('label[for="naam"]').textContent = translations[lang].Naam;
});

// Verzenden + mailinstellingen
document.getElementById("mriForm").addEventListener("submit", function () {
  const kritiekeVelden = ["Pacemaker", "Pijnpomp", "Metaal"];
  kritiekeVelden.forEach(veld => {
    const keuze = this.querySelector(`input[name="${veld}"]:checked`);
    if (keuze && keuze.value.toLowerCase() === "ja") {
      keuze.value = "JA"; // hoofdletters in mail
    }
  });

  // Mail onderwerp met naam
  const voornaam = this.elements["voornaam"].value;
  const naam = this.elements["naam"].value;
  this.elements["_subject"].value = "MRI vragenlijst – " + voornaam + " " + naam;
});

// Check of alle velden ingevuld zijn (verzendknop)
const form = document.getElementById("mriForm");
const submitBtn = document.getElementById("submitBtn");

function checkFormCompletion() {
  let allFilled = true;
  const radioGroups = ["Pacemaker","Pijnpomp","Binnenoor","Metaal","Hoorapparaat","Rugoperatie"];
  radioGroups.forEach(name => {
    const checked = form.querySelector(`input[name="${name}"]:checked`);
    if (!checked) allFilled = false;
  });

  if (!form.elements["voornaam"].value.trim() ||
      !form.elements["naam"].value.trim() ||
      !form.elements["toestemming"].checked) {
    allFilled = false;
  }

  if(allFilled) {
    submitBtn.disabled = false;
    submitBtn.style.backgroundColor = "#007bff";
    submitBtn.style.color = "#fff";
  } else {
    submitBtn.disabled = true;
    submitBtn.style.backgroundColor = "#ccc";
    submitBtn.style.color = "#666";
  }
}

// Event listeners op alle inputs
form.querySelectorAll('input').forEach(input => {
  input.addEventListener('change', checkFormCompletion);
});
form.querySelectorAll('input[type="text"]').forEach(input => {
  input.addEventListener('input', checkFormCompletion);
});

// Initial check
checkFormCompletion();
</script>

</body>
</html>

